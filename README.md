# Finding missing Compiler Optimizations with Binary Code Analysis

This is the git-repository for the master thesis by Colin Arnet.

## Abstract
Missing compiler optimizations prevent compilers to generate binary files with optimal performance. We introduce five filter methods in a differential testing environment that detect potential missing optimization cases. By performing binary analysis we get detailed information about the compiler outputs. By analyzing the accesses to global variables and the sizes of the control-flow graph we were able to detect 4 confirmed performance bugs in gcc. Our approach shows the potential of detecting performance bugs with binary analysis.

## How to use:
### Filters:
The filters are located in the `./binary_analysis/` directory:

Simple Variable analysis:

`variable_binary_analysis.py`

`variable_binary_analysis_static.py`

Extended Variable analysis:

`extended_variable_binary_analysis.py`

`extended_variable_binary_analysis_static.py`

Path Analysis:

`path_binary_analysis.py`

CFG Analysis + CFG Extended Analysis:

`cfg_binary_analysis.py`


All filters take the following arguments:

`--sample <source.c>`: Source file as single sample (in `./program_examples/`, otherwise CSmith programs are generated.

`--clang_path <path-to-clang-executable>`: Path to the clang executable under test (default from `/usr/bin/clang`)

`--gcc_path <path-to-gcc-executable>`: Path to the gcc executable under test (default from `/usr/bin/gcc`)


Change the `program_num` in the main function to get more interesting reduced programs.

`binary_analysis_utils.py` contains most of the binary analysis functionalities and can be used as a library for new filters.

`binary_analysis_data_processing.py` takes the programs in `./data/` and processes the data and summarizes its results in `./evaluation/`

### Bug Reports
The `./bug_reports/` directory contains all the bug reports sorted by filter.

### Data
The `./data/` directory contains the 10'000 samples for the overall statistic
`./data_<filter_name>/` contains the intersting programs that were reduced and manually checked for bug reports.

### Evaluation
The `./evaluation/` directory contains all the summarized data by `binary_analysis_data_processing.py` and also contains the plots that were generated by the `plotter.py`

### Program Examples:
The `./program_examles/` directory stores the samples that are used with the `--sample argument`. It also contains the examples that were used to test the funtionalities of the filters.










